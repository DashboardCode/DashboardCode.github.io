<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
        <title>DashboardCode Multiselect Plugin for Bootstrap 4</title>
    </head>
    <body class="bg-light">
        <div class="container">

            <div class="mt-4">
		        <button id="btnAttach" class="btn btn-primary">Attach</button>
		        <button id="btnDispose" class="btn btn-warning">Dispose</button>
            </div>
            <br/>
            <div class="form-group row">
                <label class="col-form-label col-sm-2" for="languages-id">Languages:</label>
                <div class="col-sm-10">
                    <select name="States1" id="languages-id" class="form-control"  multiple="multiple">
                        <option value="AR" >Arabic</option>
                        <option value="EN" disabled selected>English</option>
                        <option value="CH">Chinese</option>
                        <option value="FR" dsiabled>French</option>
                        <option value="DE">German</option>
                        <option value="ID">Indonesian</option>                            
                        <option value="MS">Malay</option>
                        <option value="LT" hidden>Lithuanian</option>                            
                        <option value="PT">Portuguese</option>
                        <option value="RU" selected>Russian</option>
                        <option value="ES">Spanish</option>
                    </select>
                </div>
            </div>

            <div>
                <dashboardcode-bsmultiselect>
                    <template>
                    <p>Sample</p>
                    </template>
                    <select multiple class="x">
                      <option>Hello</option>
                      <option>World</option>
                    </select>
                  </dashboardcode-bsmultiselect>
            </div>
        </div>

      
        <script>
            class HelloWorld extends HTMLElement {
                  constructor() {
                    super();
                    // создадим Shadow DOM
                    this.attachShadow({ mode: "open" });
                  }
              //https://habr.com/ru/post/443032/ https://habr.com/ru/post/349366/
              // если сетапить несколько пропертис перерисовывать придется несклько раз
                  set items(items) {
                    // сохраняем значение
                    this.__items = items;
                    // перерисовываем компонент
                    this.__render();
                    }


                  connectedCallback() {
                    const name = this.getAttribute("name");
                    // Отрендерим наш контент внутрь Shadow DOM
                    //this.shadowRoot.innerHTML = `Hello, <strong>${name}</strong> :)`;
                  }
            }

            // зарегистрируем наш компонент как html-тэг
             window.customElements.define("dashboardcode-bsmultiselect", HelloWorld);
        </script>
        <!-- <script type="module">
            import Popper from "https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/esm/popper.js"
            import {BsMultiSelect} from "https://rawgit.com/DashboardCode/BsMultiSelect/master/dist/js/BsMultiSelect.wc.min.js"
            var languagesElement = document.querySelector('#languages-id');
            var bsMultiSelect = null;
            document.querySelector('#btnAttach').onclick = function(){
                if (!bsMultiSelect){
                    var environment = {window, Popper};
                    bsMultiSelect = BsMultiSelect(languagesElement, environment);
                }
            };

            document.querySelector('#btnDispose').onclick =
                function() {
                    if (bsMultiSelect){
                        bsMultiSelect.Dispose();
                        bsMultiSelect= null;
                    }  
                };
        </script> -->
    </body>
</html>
